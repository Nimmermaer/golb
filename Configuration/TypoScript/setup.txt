plugin.tx_golb {
	settings {
		defaultBackendLayout = 4
	}
}

module.tx_golb < plugin.tx_golb

config.tx_extbase {
	persistence{
		classes {
			Blog\Golb\Domain\Model\Page {
				mapping {
					tableName = pages
					columns {
						abstract.mapOnProperty = abstract
						alias.mapOnProperty = alias
						author_email.mapOnProperty = authorEmail
						author.mapOnProperty = authorName
						backend_layout.mapOnProperty = backendLayout
						backend_layout_next_level.mapOnProperty = backendLayoutNextLevel
						cache_tags.mapOnProperty = cacheTags
						cache_timeout.mapOnProperty = cacheTimeout
						categories.mapOnProperty = categories
						content_from_pid.mapOnProperty = contentFromPid
						crdate.mapOnProperty = crdate
						cruserId.mapOnProperty = cruserId
						deleted.mapOnProperty = deleted
						description.mapOnProperty = description
						doktype.mapOnProperty = doktype
						endtime.mapOnProperty = endTime
						extendToSubpages.mapOnProperty = extendToSubPages
						fe_group.mapOnProperty = feGroup
						hidden.mapOnProperty = hidden
						nav_hide.mapOnProperty = hiddenInNavigation
						is_siteroot.mapOnProperty = siteRoot
						keywords.mapOnProperty = keywords
						lastUpdated.mapOnProperty = lastUpdated
						layout.mapOnProperty = layout
						media.mapOnProperty = media
						mount_pid.mapOnProperty = mountPid
						mount_pid_ol.mapOnProperty = mountPidOverlay
						nav_title.mapOnProperty = navigationTitle
						newUntil.mapOnProperty = newUntil
						no_cache.mapOnProperty = noCache
						no_search.mapOnProperty = noSearch
						pid.mapOnProperty = pid
						shortcut.mapOnProperty = shortcut
						shortcut_mode.mapOnProperty = shortcutMode
						sorting.mapOnProperty = sorting
						starttime.mapOnProperty = startTime
						subtitle.mapOnProperty = subtitle
						target.mapOnProperty = target
						tstamp.mapOnProperty = timestamp
						title.mapOnProperty = title
						uid.mapOnProperty = uid
						url.mapOnProperty = url
						url_scheme.mapOnProperty = urlScheme
						url_type.mapOnProperty = urlType
						view_count.mapOnProperty = viewCount
						golb_related.mapOnProperty = relatedPages
					}
				}
			}
			Blog\Golb\Domain\Model\Category {
				mapping {
					tableName = sys_category
				}
			}
			Blog\Golb\Domain\Model\TtContent {
				mapping {
					tableName = tt_content
					columns {
						accessibility_title.mapOnProperty = accessibilityTitle
						accessibility_bypass.mapOnProperty = accessibilityBypass
						accessibility_bypass_text.mapOnProperty = accessibilityBypassText
						altText.mapOnProperty = altText
						backupColPos.mapOnProperty = backupColPos
						bodytext.mapOnProperty = bodyText
						crdate.mapOnProperty = crDate
						cruserId.mapOnProperty = crUserId
						colPos.mapOnProperty = colPos
						cols.mapOnProperty = cols
						CType.mapOnProperty = cType
						date.mapOnProperty = date
						deleted.mapOnProperty = deleted
						endtime.mapOnProperty = endTime
						fe_group.mapOnProperty = feGroup
						file_collections.mapOnProperty = fileCollections
						filelink_size.mapOnProperty = fileLinkSize
						filelink_sorting.mapOnProperty = fileLinkSorting
						header.mapOnProperty = header
						header_layout.mapOnProperty = headerLayout
						header_link.mapOnProperty = headerLink
						header_position.mapOnProperty = headerPosition
						hidden.mapOnProperty = hidden
						image.mapOnProperty = image
						imageborder.mapOnProperty = imageBorder
						imagecaption_position.mapOnProperty = imageCaptionPosition
						imagecols.mapOnProperty = imageCols
						imageheight.mapOnProperty = imageHeight
						imageorient.mapOnProperty = imageOrient
						imagewidth.mapOnProperty = imageWidth
						image_compression.mapOnProperty = imageCompression
						image_effects.mapOnProperty = imageEffects
						image_frames.mapOnProperty = imageFrames
						image_link.mapOnProperty = imageLink
						image_noRows.mapOnProperty = imageNoRows
						image_zoom.mapOnProperty = imageZoom
						layout.mapOnProperty = layout
						linkToTop.mapOnProperty = linkToTop
						list_type.mapOnProperty = listType
						longdescURL.mapOnProperty = longDescURL
						media.mapOnProperty = media
						menu_type.mapOnProperty = menuType
						multimedia.mapOnProperty = multimedia
						pages.mapOnProperty = pages
						pid.mapOnProperty = pid
						pi_flexform.mapOnProperty = piFlexForm
						records.mapOnProperty = records
						recursive.mapOnProperty = recursive
						rte_enabled.mapOnProperty = rteEnabled
						sectionIndex.mapOnProperty = sectionIndex
						sorting.mapOnProperty = sorting
						section_frame.mapOnProperty = sectionFrame
						select_key.mapOnProperty = selectKey
						subheader.mapOnProperty = subHeader
						spaceAfter.mapOnProperty = spaceAfter
						spaceBefore.mapOnProperty = spaceBefore
						starttime.mapOnProperty = startTime
						sys_language_uid.mapOnProperty = sysLanguageUid
						table_bgColor.mapOnProperty = tableBgColor
						table_border.mapOnProperty = tableBorder
						table_cellpadding.mapOnProperty = tableCellPadding
						table_cellspacing.mapOnProperty = tableCellSpacing
						target.mapOnProperty = target
						titleText.mapOnProperty = titleText
						tstamp.mapOnProperty = timestamp
					}
				}
			}
		}
	}
}

tt_content.golb < tt_content.list.20.golb_blog
tt_content.golb.switchableControllerActions.Blog.1 = latest

lib.BlogCountView = USER
lib.BlogCountView {
	userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
	extensionName = Golb
	pluginName = ViewCount
	vendorName = Blog
	switchableControllerActions {
		ViewCount {
			1 = countView
		}
	}
	view < plugin.tx_golb.view
	persistence < plugin.tx_golb.persistence
	settings < plugin.tx_golb.settings
}